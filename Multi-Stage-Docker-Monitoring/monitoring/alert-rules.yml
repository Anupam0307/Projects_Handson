groups:
  - name: app-alerts
    rules:

    - alert: AppDown
      expr: up{job="node-app"} == 0
      for: 1m
      labels:
        severity: critical
      annotations:
        summary: "Application is down"
        description: "Node.js app is not reachable for 1 minute"

    - alert: HighCPUUsage
      expr: rate(container_cpu_usage_seconds_total[1m]) > 0.8
      for: 2m
      labels:
        severity: warning
      annotations:
        summary: "High CPU usage detected"
        description: "Container CPU usage > 80%"

    - alert: HighMemoryUsage
      expr: container_memory_usage_bytes / container_spec_memory_limit_bytes > 0.8
      for: 2m
      labels:
        severity: warning
      annotations:
        summary: "High memory usage detected"
        description: "Container memory usage > 80%"
